# Covid Pydash
A customizable covid dashboard written with Flask and Angular Material during bachelor thesis for FHGR.

## Disclaimer
Please note that this Web Application is considered entirely non-commercial and does not pursue any monetary purpose. I created this application during my bachelor thesis with awesome libraries which are free to use as long as the project is non commercial. So for anyone forking this repository I would like encourage you to do the same :smile:. 

## Setup of Tools and Packages
In order to run this application you will need the following things installed on your computer
* [Node JS (Version >= 14.x)](https://nodejs.org/en/)
* [Python 3](https://www.python.org/)

With these dependencies installed please do the following steps next:
* Install angular cli tools: `npm install -g @angular/cli`
* Navigate to the cloned git repo so that you are in the root folder (**folder where package.json file is located**)
* Next install all necessary npm packages with the following command `npm i`
* Navigate to the backend folder
* Install all relevant python packages with the following command `python -m pip install -r requirements.txt`

## Scripts
There are a few handy scripts available. For windows please use the **.cmd** and for Linux or Mac please use the **.sh** scritps:
* `runBackendLocal`: Sets environment variables needed by flask and starts a local flask server. Inteded for **development** purpose only.
* `runBackendProduction`: Starts the backend in production mode. For this to work however you should have a look  at the **Deployment** section.
* `cleanDashboardFiles`: Cleans all dashboard files generated by the backend. This is useful if you want to start without any dashboards available at all.

## Local Development
For local development follow these steps:
* Make sure you are in the root folder of the cloned repostiory (e.g covid-pydash)
* Run the `runBackendLocal` script. Please use the .cmd for Windows and the .sh for Linux or Mac
* Open a new terminal tab and navigate to the **frontend** directory
* Execute the **ng serve** command in order to start the angular application
* At this point both the backend and the frontend should be running
* Visit http://localhost:4200 


## Deployment
For the deployment of this Web Application [Linode](https://www.linode.com/) was used. Linode makes it very easy to setup a Linux distribution and install all necessary tools. The following steps will be necessary if you want to run this Web Appliation on a Linode instance:
* Create a Linode Instance (for example shared CPU with Ubuntu 22.04 as Operating system)
* SSH into your newly created instance by copying the **SSH Access Command** from your Linode overview and provide the password you have choosen while creating the instance
* Clone this repository with a `git clone https://github.com/YahArt/covid-pydash.git` command
* Make sure you have all relevant packages installed as described in the `Setup and Tools` section.
* Install an **Nginx Web Server** (needed for serving the Angular Application) by running the command `sudo apt install nginx`
* Create an nginx configuration for the Web Application with a name of your choosing (replace `<your-name>` with your choosen name) in the sites-enabled directory by running the following command:  ` sudo nano /etc/nginx/sites-enabled/<your-name>`

The configuration should look something like this

```conf
# /etc/nginx/conf.d/covid_pydash.conf
server {
  listen 80;
  server_name <ip_address_of_linode_instance>;
  root <path_to_your_web_app_directory>;
  location / {
    try_files $uri $uri/ /index.html;
  }
}
```


Please make sure the replace `<ip_address_of_linode_instance>` with the actual IP address of your Linode instance.

Also replace `<path_to_your_web_app_directory>` with the directory where your Web Application is located (for example /srv/covid_pydash)

* Next install gunicorn (a Python Web Server Gateway) which will run the flask backend with the following command `sudo apt-get install gunicorn`
* Now it is time to adapt the IP Adress configured in the `frontend/src/environment/environment.prod.ts`. Replace `<your_ip_address` with the actual IP Address of your Linode instance

```ts
export const environment = {
  production: true,
  restApi: 'http://<your_ip_address>:5000',
  shareLinkPrefix: 'http://<your_ip_address>:80'
};
```
* Next we need to build the Angular Application in production mode. For this navigate to the frontend directory of your cloned Repostiry (e.g `cd covid-pydash/frontend`) and then run the command `npm run build`
* This should have created a **dist** directory which you can copy to the path of your specified web application in as specified in your nginx configuration (for example do a `cp -R dist /srv/`)
* Next please rename the dist folder to the name of the folder specified by your nginx configuration (for example do mv /srv/dist /srv/covid_pydash)
* Next we need to tell nginx to use our new config with the following two command `sudo unlink /etc/nginx/sites-enabled/default` and `sudo nginx -s reload`
* As a next step please navigate into your cloned repository and make the script `runBackendProduction.sh` executable by running the command `chmod +x ./runBackendProduction.sh`
* Now you can start the backend by simply executing the script `./runBackendProduction.sh`
* Your Web Application should now be available under your Linode Instance IP Address

## How does it look like?

### Home Section
Here you can get a quick overview about the different sections of the web application.
![Home Section](/documentation/images/home_section.png)

### Create a dashboard
Here you can quickly create a new dashboard from scratch or from a template.
![Create a Dashboard Section](/documentation/images/create_a_dashboard_section.png)

### Dashboard Overview
Manage your created dashboards. Here you can delete, open or share them.
![Dashboard Overview Section](/documentation/images/dashboard_overview_section.png)

### Your Dashboard
Once you open a dashboard from the dashboard overview section you can play around with the dashboard to your hearts content. Once edit mode is enabled (clicking the pen icon) you can dynamically add new corona related widgets, move them or delete them again. There is also a saving functionality.
![Personalize your Dashboard](/documentation/images/personalize_your_dashboard.png)

Of course there is also a filter functionality where you can filter all widgets by time and regions.
![Personalize your Dashboard](/documentation/images/personalize_your_dashboard_filtering.png)

### FAQ Section
Get to know a few facts about Corona. The information in this section was taken from the BAG of Switzerland and can be found [here](https://www.bag.admin.ch/bag/en/home/krankheiten/ausbrueche-epidemien-pandemien/aktuelle-ausbrueche-epidemien/novel-cov/haeufig-gestellte-fragen.html).

![FAQ Section](/documentation/images/faq_section.png)

### About Section
Some more technical information about the libraries which were used etc.
![About Section](/documentation/images/about_section.png)